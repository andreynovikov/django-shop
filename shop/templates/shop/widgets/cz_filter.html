{% with widget.optgroups|length as count %}
<div{% if count > 5 %} class="cz-filter"{% endif %}>
  {% if count > 5 %}
  <div class="input-group-overlay input-group-sm mb-2">
    <input class="cz-filter-search form-control form-control-sm appended-form-control" type="text" placeholder="Поиск">
    <div class="input-group-append-overlay"><span class="input-group-text"><i class="czi-search"></i></span></div>
  </div>
  {% endif %}
  <ul class="widget-list cz-filter-list list-unstyled{% if count > 5 %} pt-1{% endif %}" style="max-height: 12rem;" data-simplebar data-simplebar-auto-hide="false">
    {% for group_name, group_choices, group_index in widget.optgroups %}{% for option in group_choices %}
    <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
      <div class="custom-control custom-checkbox">
        <input class="custom-control-input" type="checkbox" id="{{ widget.name }}-{{ option.value|stringformat:'s' }}" name="{{ widget.name }}" value="{{ option.value|stringformat:'s' }}"{% include "django/forms/widgets/attrs.html" with widget=option %}>
        <label class="custom-control-label cz-filter-item-text" for="{{ widget.name }}-{{ option.value|stringformat:'s' }}">{{ option.label }}</label>
      </div>
    </li>
    {% endfor %}{% endfor %}
  </ul>
</div>
{% endwith %}
