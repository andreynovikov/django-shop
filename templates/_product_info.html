{% load staticfiles %}
{% load thumbnail %}
{% load decimals %}
{% load shop_filters %}
<!-- Product card (Grid) -->
<div class="card product-card">
  {% if product.isnew %}
  <span class="badge badge-info badge-shadow">Новинка</span>
  {% endif %}
  {% if product.recomended %}
  <span class="badge badge-warning badge-shadow">Рекомендуем</span>
  {% endif %}
  {% for action in product.get_sales_actions %}{% if action.notice %}
  <span class="badge badge-danger badge-shadow">{{ action.notice }}</span>
  {% endif %}{% endfor %}
  <button class="btn-wishlist btn-sm" type="button" data-toggle="tooltip" data-placement="left" title="Add to wishlist"><i class="czi-heart"></i></button><a class="d-inline-block mx-auto pt-3 overflow-hidden" href="{% url 'product' product.code %}">{% if product.image_prefix|add:'.jpg'|file_exists %}{% thumbnail product.image_prefix|add:'.jpg' '200x200' padding=True as im %}<img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" alt="{{ product.title }} {{ product.whatis }}"/>{% endthumbnail %}{% else %}<i class="d-inline-block czi-camera text-muted" style="width: 200px; height: 200px; font-size: 100px; padding: 50px"></i>{% endif %}</a>
  <div class="card-body py-2"><a class="product-meta d-block font-size-xs pb-1" href="{% url 'product' product.code %}">{{ product.whatis }} {{ product.partnumber }}</a>
    <h3 class="product-title font-size-sm"><a href="{% url 'product' product.code %}">{{ product.title }}</a></h3>
    <div class="d-flex justify-content-between">
      {% if product.price > 0 %}
      <div class="product-price"><span class="text-accent">{{ product.cost|quantize:"1" }}<small>&nbsp;руб</small></span>
      {% if product.discount > 0 %}
      <del class="font-size-sm text-muted">{{ product.price|quantize:"1" }}<small>&nbsp;руб</small></del>
      {% endif %}
      </div>
      {% endif %}
    </div>
  </div>
  <div class="card-body card-body-hidden">
    <div class="font-size-ms pb-2">
      {{ product.shortdescr|safe }}
    </div>
    {% if product.sales_notes %}
    <div class="font-size-ms text-info pb-2">{{ product.sales_notes }}</div>
    {% endif %}
    {% if product.instock > 0 %}
    <a class="btn btn-primary btn-sm btn-block mb-2 add-to-cart" href="{% url 'shop:add' product.id %}" data-id="{{ product.id }}"><span class="d-none spinner-border spinner-border-sm mr-2" role="status" aria-hidden="true"></span><i class="czi-cart font-size-sm mr-1"></i>{% if product.variations %}Выбрать{% else %}Купить{% endif %}</a>
    {% else %}
    <a class="btn btn-secondary btn-sm btn-block mb-2" href="{% url 'product' product.code %}">Подробное описание</a>
    {% endif %}
    <div class="text-center"><a class="nav-link-style font-size-ms product-quick-view" href="{% url 'product_quick_view' product.code %}" data-href="{% url 'product' product.code %}" data-title="{{ product.title }}"><i class="czi-eye align-middle mr-1"></i>Быстрый просмотр</a></div>
  </div>
</div>
