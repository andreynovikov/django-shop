{% extends "seo.html" %}
{% load static %}
{% load shop_tags %}
{% block meta-keywords %}Швейные машины, вышивальные и вязальные машины, оверлоки и аксессуары Швейный Мир, швейная, швейные, вышивальная, вышивальные, вязальная, вязальные, машинка, машина, машинки, машины, оверлок, оверлоки,  шитье, вышивка, вязание, купить, интернет, магазин, pfaff, brother, janome, bernina, husqvarna, huskystar, viking, оверлок, строчка, петля, челнок, стежок, ткань, рукав{% endblock %}
{% block meta-description %}Швейный Мир - швейные, вышивальные и вязальные машины, оверлоки и аксессуары{% endblock %}

{% block css_wrapper %}
<link rel="preload" as="image" href="https://www.sewing-world.ru{% static '/i/logo.svg' %}" />
<link rel="stylesheet" href="{% static 'bootstrap/css/bootstrap_glyphicons.css' %}"/>
<style>
  .ui-autocomplete { z-index: 2000 }
  .ui-autocomplete-loading { background: white url("{% static '/i/ui-anim_basic_16x16.gif' %}") right center no-repeat; }

  .search {color:#204070; font-size: 16px; line-height: 18px; font-family: Tahoma; display: flex; flex-direction: row;justify-content: flex-start; column-gap: 8px; margin: 8px 16px;}
  .search:hover {color:#F07327;}
  .search_popular {color:#204070; font-size: 16px; line-height: 18px; font-family: Tahoma; display: flex; flex-direction: row;justify-content: flex-start; column-gap: 16px; margin: 8px 16px;}
  .search_popular:hover {color:#F07327;}
  .search_header {color:#204070; font-size: 16px; font-weight: 700; line-height: 18px; margin: 4px 16px;}
  .search_image {width: 64px;}
  .search_text {display: flex; flex-direction: column; row-gap: 8px;}
  .search_text_price {font-size: 16px; font-weight: 700; line-height: 18px;}

  /* SHOULD BE ADDED IN LESS FILE */
  .sw-navbar .dropdown-menu li li { list-style:none; margin-right:5px; }
  .sw-navbar .dropdown-menu li li a { font-weight:normal; }
  .sw-navbar .dropdown-menu li li:hover { background:#eeeeee; }

  .catalog > li > a { font-weight:bold; }
  .catalog ul { padding-left:7px }
  .catalog li li { list-style:none; padding-left:7px; }

  .glyphicon-chevron-left {margin-left:0px !important}
  .glyphicon-chevron-right {margin-right:0px !important}

  #profile-block, #orderpaymentbutton, #cartholder { margin-bottom: 5px; }
</style>
{% block css %}
{% endblock css %}
{% endblock css_wrapper %}
{% block body_header %}
<div class="container-fluid">
<div class="row">

<div class="col-md-9 sw-header-left">
<div class="sw-logo" style="max-width: 380px">
<a href="/"><img src="{% static '/i/logo.svg' %}" class="img-responsive" alt="Швейный Мир&#10; Швейные машинки, вышивальные и вязальные машины, оверлоки и аксессуары."></a>
</div>
</div>

<div class="col-md-10" style="margin-top:25px;">

{% block search_form %}
<form id="topSearchForm" action="/search/" class="form-inline">
<input type="search" name="text"  placeholder="Поиск товара" id="topSearchText" autocomplete="off" class="form-control input-sm" style="width: 70%; height:22pt"/>
<input type="submit" value="Найти" class="btn btn-sm btn-warning" style="padding:8pt;font-weight:700"/>
</form>
<div id="SearchFormSuggestions"></div>
{% endblock %}
<div style="font-weight:bold; display:inline-block;"><span style="font-weight:normal;">Розничные магазины:</span>&nbsp;+7&nbsp;495&nbsp;744-00-87 <span style="font-weight:normal;">Интернет-магазин:</span>&nbsp;+7&nbsp;495&nbsp;766-56-75</div>

</div>

<div class="col-md-5" style="margin-top:20px; margin-bottom:5px;">
<div id="profile-block" class="dropdown text-right">
    <img src="{% static 'i/user.svg' %}" alt="Профиль" height="24">
    <span>{% block user_profile_links %}{% endblock %}</span><a href="#" class="dropdown-toggle" data-toggle="dropdown">Мой профиль <span class="caret"></span></a>
    <ul class="dropdown-menu dropdown-menu-right" role="menu" style="z-index: 1001">
        {% if user.is_authenticated %}
        <li><a href="{% url 'shop:user_orders' %}">Кабинет покупателя</a></li>
        <li role="separator" class="divider"></li>
        <li><a href="{% url 'shop:logout' %}?next={% firstof request.get_full_path|urlencode '/' %}">Выйти</a></li>
        {% else %}
        <li><a href="{% url 'shop:login' %}?next={% firstof request.get_full_path|urlencode '/' %}">Войти</a></li>
        {% endif %}
    </ul>
</div>
{% block cart_notice %}
{% load render_view %}
<div class="text-right" id="cartholder"><span id="cart_notice">{% view "shop.views.view_basket_notice" %}</span></div>
{% endblock %}
{% block compare_notice %}
{% load render_view %}
<div id="compare-block" class="text-right"><span id="compare_notice">{% view "sewingworld.views.compare_notice" %}</span></div>
{% endblock %}
{% get_unpaid_order as order %}
{% if order %}
<div class="text-right"><a class="btn btn-success btn-xs" style="visibility: visible;" href="{% url 'shop:order' order.id %}" role="button" id="orderpaymentbutton">Оплатить заказ</a></div>
{% endif %}
</div>
</div>
</div>

<div class="navbar navbar-default navbar-static-top sw-navbar" role="navigation" style="margin-bottom:4px;">
      <div class="container-fluid text-center">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle sw-navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Меню</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <ul class="list-inline visible-xs sw-xsnavigation">
            <li><a href="/stores/">Адреса магазинов</a></li>
          </ul>
        </div>
        <div class="navbar-collapse collapse text-center">
          <ul class="nav navbar-nav navbar-center">
            <li class="hidden-xs"><a href="/stores/">Адреса магазинов</a></li>
            <li class="dropdown hidden-xs">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown">Каталог <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                {% include "_catalog.html" %}
              </ul>
            </li>
            <li class="visible-xs"><a href="/catalog/">Каталог товаров</a></li>
            <li><a href="/pages/articles/">Статьи</a></li>
            <li><a href="/blog/">Блог</a></li>
            <li><a href="/service/">Сервисные центры</a></li>
            <li><a href="/pages/delivery/">Доставка и оплата</a></li>
            <li><a href="{% url 'shop:user_orders' %}">Состояние заказа</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
</div>

<div class="sw-header-lower-block" style="background:#fffaee;margin-bottom:10px;padding-bottom:4px;">
<div class="center-block row hidden-xs" style="max-width:1200px; align:center;">
<!--
<div class="col-sm-3 text-center"><a href="/actions/"><img src="{% static '/i/categories/gifts.svg' %}" alt="Акции" height="75" width="75"><br>Акции</a></div>
-->
<div class="col-sm-3 text-center"><a href="/catalog/promo/"><img src="{% static '/i/categories/sale.svg' %}" alt="Специальные предложения" height="75" width="75"><br>Специальные предложения</a></div>
<div class="col-sm-3 text-center"><a href="/catalog/sewing_machines/"><img src="{% static '/i/categories/compsewing.svg' %}" alt="Швейные машины" height="75" width="75"><br>Швейные машины</a></div>
<div class="col-sm-3 text-center"><a href="/catalog/embroidery_machines/"><img src="{% static '/i/categories/embroidery.svg' %}" alt="Швейно-вышивальные машины" height="75" width="94"><br>Вышивальные машины</a></div>
<div class="col-sm-3 text-center"><a href="/catalog/sergers/"><img src="{% static '/i/categories/overlock.svg' %}" alt="Оверлоки, коверлоки и распошивальные машины" height="75" width="75"><br>Оверлоки и коверлоки</a></div>
<div class="col-sm-3 text-center"><a href="/catalog/knitting_machines/"><img src="{% static '/i/categories/knitting.svg' %}" alt="Вязальные машины" height="75" width="94"><br>Вязальные машины</a></div>
<div class="col-sm-3 text-center"><a href="/catalog/accessories/"><img src="{% static '/i/categories/accessories.svg' %}" alt="Аксессуары" height="75" width="75"><br>Аксессуары</a></div>
</div>
</div>
{% endblock %}
{% block content_wrapper %}
<div class="container-fluid content_wrapper">
<!-- ------------------------------------------------------------------------------------------------------------ -->
{% load django_bootstrap_breadcrumbs %}
{% block breadcrumbs %}
    {% clear_breadcrumbs %}
{% endblock %}
{% render_breadcrumbs "_breadcrumbs.html" %}
{% block content %}
{% endblock %}
</div> <!-- /container-fluid -->
{% endblock %}
{% block javascript_wrapper %}
<!-- diginetica search -->
<script>
  (function($) {
    var proto = $.ui.autocomplete.prototype, initSource = proto._initSource;
    function filter(array, term) {
      var matcher = new RegExp($.ui.autocomplete.escapeRegex(term), "i");
      return $.grep(array, function(value) {
        return matcher.test($("<div>").html(value.label || value.value || value ).text());
      });
    }
    $.extend(proto, {
      _initSource: function() {
        if (this.options.html && $.isArray(this.options.source)) {
          this.source = function(request, response) {
            response(filter(this.options.source, request.term));
          };
        } else {
          initSource.call(this);
        }
      },
      _renderItem: function(ul, item) {
        return $("<li></li>")
          .data("item.autocomplete", item)
          .append($( "<a></a>")[this.options.html ? "html" : "text"](item.label))
          .appendTo(ul);
      }
    });
  })(jQuery);

  $(function() {
    $("#topSearchText").autocomplete({
      minLength: 2,
      html: true,
      source: function(request, response) {
        var request_param = {
          apiKey: "OHZ51IBWQJ",
          st: request.term,
          strategy: "advanced_xname,zero_queries",
          productsSize: 6,
          regionId: "global",
          forIs: true,
          showUnavailable: true,
          unavailableMultiplier: 0.2,
          withContent: true,
          withSku: false
        };
        $.ajax({
          url: "https://autocomplete.diginetica.net/autocomplete",
          dataType: "json",
          data: request_param,
          success: function(data) {
            var suggestions = data?.correction? [{label:"<span class='search'>" + data.correction + "</span>", value: data.correction}] : [];
            var sts = data?.sts || [];
            var {suggestions} = sts.reduce(({suggestions, header}, item) => {
              if (!header) {
                suggestions.push({label: ("<span class='search_header'>Часто ищут</span>"), value: ("")});
                header = true;
              }
              suggestions.push({label:"<span class='search'><span class='glyphicon glyphicon-search'></span>"+item.st + "</span>", value: item.st});
              return {suggestions, header};
            }, {suggestions, header: false});

            var products = data?.products || [];
            var {suggestions} = products.reduce(({suggestions, header}, item) => {
              if (!header) {
                suggestions.push({label: ("<span class='search_header'>Популярные товары</span>"), value: ("")});
                header = true;
              }
              suggestions.push({label: "<span class='search_popular'>" + (item.image_url ? "<img class='search_image' src='"+item.image_url+"'>" : "") + "<span class='search_text'>" + item.name + "<span class='search_text_price'>" + item.price + "</span>" + "</span>", value:  (""), product: 1, url: item.link_url});
              return {suggestions, header};
            }, {suggestions, header: false});

            var categories = data?.categories || [];
            var {suggestions} = categories.reduce(({suggestions, header}, item) => {
              if (!header) {
                suggestions.push({ label: ("<span class='search_header'>Искать в категории</span>"), value: ("")});
                header = true;
              }
              suggestions.push({ label:"<span class='search'><span class='glyphicon glyphicon-th-large'></span>" + item.name + "</span>", value: (""), query:data.query, catid:item.id});
              return {suggestions, header};
            }, {suggestions, header: false});
            response(suggestions);
          }
        });
      },
      select: function(event, ui) {
        if (ui.item.product == 1) {
          document.location.href = ui.item.url;
        } else if (ui.item.query) {
          document.location.href = "/search/?text=" + ui.item.query + "&filter=categories:" + ui.item.catid;
        } else if (ui.item.value == "") {
        } else {
          $("#topSearchText").val(ui.item.value);
          $("#topSearchText").closest("form").submit();
        }
      }
    });
  });
</script>
<!-- / diginetica search -->
{% block javascript %}
{% endblock %}
{% endblock %}
{% block body_footer %}
<!-- ------------------------------------------------------------------------------------------------------------ -->
<div class="container-fluid sw-bottom-firstline">
</div> <!-- /sw-bottom-firstline -->
<div class="container-fluid sw-bottom">
{% block footer_contents %}
<div class="row">
<div class="col-md-8">
<table class="sw-bottom-phones">
<tr>
<td colspan="2"><h3>Телефоны</h3></td>
</tr>
<tr>
<td class="sw-bottom-phones-left">Розничные магазины:</td>
<td class="sw-bottom-phones-right">+7 495 744-00-87</td>
</tr>
<tr>
<td class="sw-bottom-phones-left">Интернет-магазин:</td>
<td class="sw-bottom-phones-right">+7 495 766-56-75</td>
</tr>
<tr>
<td class="sw-bottom-phones-left">Оптовые продажи фурнитуры:</td>
<td class="sw-bottom-phones-right">+7 916 948-97-98</td>
</tr>
<tr>
<td class="sw-bottom-phones-left">Оптовые продажи швейных машин:</td>
<td class="sw-bottom-phones-right">+7 495 744-00-87</td>
</tr>
<tr>
<td class="sw-bottom-phones-left"><a href="/service/">Ремонт швейных машин:</a></td>
<td class="sw-bottom-phones-right">+7 495 718-86-02<br>+7 499 158-06-87</td>
</tr>
</table>
</div>
<div class="col-md-8 text-center small">
<h3><a href="mailto:info@thsm.ru">info@thsm.ru</a></h3>
<p>&copy;1996 Торговый Дом Швейных Машин</p>
</div>
<div class="col-md-8 text-center">
  <h3>Наши страницы в соцсетях.<br> Присоединяйтесь!</h3>
  <div class="row">
    <div class="col-md-8 col-xs-8 text-right"></div>
    <div class="col-md-16 col-xs-16 text-left">
      <p>
        <a href="https://vk.com/sew.world"><img width="60" src="/media/images/social_vk.svg" loading="lazy"></a><a href="https://vk.com/sew.world">@sew.world</a><br>
        <a href="https://t.me/sewingworldrus"><img style="width:30px; height:30px; margin-left:15px; margin-right:15px" src="/media/images/social_tg.svg" loading="lazy"></a><a href="https://t.me/sewingworldrus">@sewingworldrus</a><br>
<!--    <a href="https://instagram.com/sew.world"><img width="60" src="/media/images/social_inst.svg"></a><a href="https://instagram.com/sew.world">@sew.world</a><br>
        <a href="https://ru-ru.facebook.com/sewing.world.russia"><img width="60" src="/media/images/social_fb.svg"></a><a href="https://ru-ru.facebook.com/sewing.world.russia">@sewing.world.russia</a><br> -->
        <a href="https://youtube.com/ШвейныйМирРоссия"><img width="60" src="/media/images/social_yt.svg" loading="lazy"></a><a href="https://youtube.com/ШвейныйМирРоссия">@ШвейныйМирРоссия</a>
     </p>
    </div>
  </div>
</div>
</div>
{% endblock %}
</div> <!-- /container-fluid -->
<div id="sw-cartinfo" class="sw-cartinfo-popup mfp-hide" sstyle="display:none; cursor:default;">
<div id="cart_extnotice"></div>
<p><a href="#" role="button" id="continue" class="btn btn-info sw-addProduct-sm"    />Продолжить выбор товаров</a></p>
<p><a href="#" role="button" id="gocart"   class="btn btn-success sw-addProduct-sm" />Оформить или изменить заказ</a></p>
</div>
{% endblock %}
