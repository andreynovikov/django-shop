{% extends "page_overlapped.html" %}
{% load mptt_tags %}
{% load django_bootstrap_breadcrumbs %}
{% load site %}
{% block title %}{{ category.name }}{% endblock %}
{% block content_title %}{{ category.name }}{% endblock %}
{% block breadcrumbs %}
    {{ block.super }}
    {% breadcrumb "Каталог" "catalog" %}
    {% for node,structure in category.get_ancestors|tree_info %}
        {% if node.is_child_node %}
            {% breadcrumb node "category" node.get_path %}
        {% endif %}
    {% endfor %}
    {% breadcrumb category.name "" %}
{% endblock %}
{% block content %}
    <!-- Page Content-->
    <div class="container pb-5 mb-2 mb-md-4">
      <div class="row">
        <!-- Sidebar-->
        <aside class="col-lg-4 pt-4 pt-lg-0">
          <!-- Sidebar--><a class="cz-sidebar-toggler" href="#shop-sidebar" data-toggle="sidebar"><i class="czi-menu"></i>
            <div class="font-size-xs mt-n1">Панель</div></a>
          <div class="cz-sidebar rounded-lg box-shadow-lg" id="shop-sidebar">
            <div class="cz-sidebar-header box-shadow-sm">
              <button class="close ml-auto" type="button" data-dismiss="sidebar" aria-label="Закрыть"><span class="d-inline-block font-size-xs font-weight-normal align-middle">Закрыть панель</span><span class="d-inline-block align-middle ml-2" aria-hidden="true">&times;</span></button>
            </div>
            <div class="cz-sidebar-body" data-simplebar data-simplebar-auto-hide="true">
              <!-- Price range-->
              <div class="widget mb-4 pb-4 border-bottom">
                <h3 class="widget-title">Price</h3>
                <div class="cz-range-slider" data-start-min="250" data-start-max="680" data-min="0" data-max="1000" data-step="1">
                  <div class="cz-range-slider-ui"></div>
                  <div class="d-flex pb-1">
                    <div class="w-50 pr-2 mr-2">
                      <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span class="input-group-text">$</span></div>
                        <input class="form-control cz-range-slider-value-min" type="text">
                      </div>
                    </div>
                    <div class="w-50 pl-2">
                      <div class="input-group input-group-sm">
                        <div class="input-group-prepend"><span class="input-group-text">$</span></div>
                        <input class="form-control cz-range-slider-value-max" type="text">
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Filter by Brand-->
              <div class="widget cz-filter mb-4 pb-4 border-bottom">
                <h3 class="widget-title">Brand</h3>
                <div class="input-group-overlay input-group-sm mb-2">
                  <input class="cz-filter-search form-control form-control-sm appended-form-control" type="text" placeholder="Search">
                  <div class="input-group-append-overlay"><span class="input-group-text"><i class="czi-search"></i></span></div>
                </div>
                <ul class="widget-list cz-filter-list list-unstyled pt-1" style="max-height: 12rem;" data-simplebar data-simplebar-auto-hide="false">
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="adidas">
                      <label class="custom-control-label cz-filter-item-text" for="adidas">Adidas</label>
                    </div><span class="font-size-xs text-muted">425</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="ataylor">
                      <label class="custom-control-label cz-filter-item-text" for="ataylor">Ann Taylor</label>
                    </div><span class="font-size-xs text-muted">15</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="armani">
                      <label class="custom-control-label cz-filter-item-text" for="armani">Armani</label>
                    </div><span class="font-size-xs text-muted">18</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="banana">
                      <label class="custom-control-label cz-filter-item-text" for="banana">Banana Republic</label>
                    </div><span class="font-size-xs text-muted">103</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="bilabong">
                      <label class="custom-control-label cz-filter-item-text" for="bilabong">Bilabong</label>
                    </div><span class="font-size-xs text-muted">27</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="birkenstock">
                      <label class="custom-control-label cz-filter-item-text" for="birkenstock">Birkenstock</label>
                    </div><span class="font-size-xs text-muted">10</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="klein">
                      <label class="custom-control-label cz-filter-item-text" for="klein">Calvin Klein</label>
                    </div><span class="font-size-xs text-muted">365</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="columbia">
                      <label class="custom-control-label cz-filter-item-text" for="columbia">Columbia</label>
                    </div><span class="font-size-xs text-muted">508</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="converse">
                      <label class="custom-control-label cz-filter-item-text" for="converse">Converse</label>
                    </div><span class="font-size-xs text-muted">176</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="dockers">
                      <label class="custom-control-label cz-filter-item-text" for="dockers">Dockers</label>
                    </div><span class="font-size-xs text-muted">54</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="fruit">
                      <label class="custom-control-label cz-filter-item-text" for="fruit">Fruit of the Loom</label>
                    </div><span class="font-size-xs text-muted">739</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="hanes">
                      <label class="custom-control-label cz-filter-item-text" for="hanes">Hanes</label>
                    </div><span class="font-size-xs text-muted">92</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="choo">
                      <label class="custom-control-label cz-filter-item-text" for="choo">Jimmy Choo</label>
                    </div><span class="font-size-xs text-muted">17</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="levis">
                      <label class="custom-control-label cz-filter-item-text" for="levis">Levi's</label>
                    </div><span class="font-size-xs text-muted">361</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="lee">
                      <label class="custom-control-label cz-filter-item-text" for="lee">Lee</label>
                    </div><span class="font-size-xs text-muted">264</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="wearhouse">
                      <label class="custom-control-label cz-filter-item-text" for="wearhouse">Men's Wearhouse</label>
                    </div><span class="font-size-xs text-muted">75</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="newbalance">
                      <label class="custom-control-label cz-filter-item-text" for="newbalance">New Balance</label>
                    </div><span class="font-size-xs text-muted">218</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="nike">
                      <label class="custom-control-label cz-filter-item-text" for="nike">Nike</label>
                    </div><span class="font-size-xs text-muted">810</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="navy">
                      <label class="custom-control-label cz-filter-item-text" for="navy">Old Navy</label>
                    </div><span class="font-size-xs text-muted">147</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="polo">
                      <label class="custom-control-label cz-filter-item-text" for="polo">Polo Ralph Lauren</label>
                    </div><span class="font-size-xs text-muted">64</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="puma">
                      <label class="custom-control-label cz-filter-item-text" for="puma">Puma</label>
                    </div><span class="font-size-xs text-muted">370</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="reebok">
                      <label class="custom-control-label cz-filter-item-text" for="reebok">Reebok</label>
                    </div><span class="font-size-xs text-muted">506</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="skechers">
                      <label class="custom-control-label cz-filter-item-text" for="skechers">Skechers</label>
                    </div><span class="font-size-xs text-muted">209</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="hilfiger">
                      <label class="custom-control-label cz-filter-item-text" for="hilfiger">Tommy Hilfiger</label>
                    </div><span class="font-size-xs text-muted">487</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="armour">
                      <label class="custom-control-label cz-filter-item-text" for="armour">Under Armour</label>
                    </div><span class="font-size-xs text-muted">90</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="urban">
                      <label class="custom-control-label cz-filter-item-text" for="urban">Urban Outfitters</label>
                    </div><span class="font-size-xs text-muted">152</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="vsecret">
                      <label class="custom-control-label cz-filter-item-text" for="vsecret">Victoria's Secret</label>
                    </div><span class="font-size-xs text-muted">238</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center mb-1">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="wolverine">
                      <label class="custom-control-label cz-filter-item-text" for="wolverine">Wolverine</label>
                    </div><span class="font-size-xs text-muted">29</span>
                  </li>
                  <li class="cz-filter-item d-flex justify-content-between align-items-center">
                    <div class="custom-control custom-checkbox">
                      <input class="custom-control-input" type="checkbox" id="wrangler">
                      <label class="custom-control-label cz-filter-item-text" for="wrangler">Wrangler</label>
                    </div><span class="font-size-xs text-muted">115</span>
                  </li>
                </ul>
              </div>
              <!-- Filter by Color-->
              <div class="widget">
                <h3 class="widget-title">Color</h3>
                <div class="d-flex flex-wrap">
                  <div class="custom-control custom-option text-center mb-2 mx-1" style="width: 4rem;">
                    <input class="custom-control-input" type="checkbox" id="color-blue-gray">
                    <label class="custom-option-label rounded-circle" for="color-blue-gray"><span class="custom-option-color rounded-circle" style="background-color: #b3c8db;"></span></label>
                    <label class="d-block font-size-xs text-muted mt-n1" for="color-blue-gray">Blue-gray</label>
                  </div>
                  <div class="custom-control custom-option text-center mb-2 mx-1" style="width: 4rem;">
                    <input class="custom-control-input" type="checkbox" id="color-burgundy">
                    <label class="custom-option-label rounded-circle" for="color-burgundy"><span class="custom-option-color rounded-circle" style="background-color: #ca7295;"></span></label>
                    <label class="d-block font-size-xs text-muted mt-n1" for="color-burgundy">Burgundy</label>
                  </div>
                  <div class="custom-control custom-option text-center mb-2 mx-1" style="width: 4rem;">
                    <input class="custom-control-input" type="checkbox" id="color-teal">
                    <label class="custom-option-label rounded-circle" for="color-teal"><span class="custom-option-color rounded-circle" style="background-color: #91c2c3;"></span></label>
                    <label class="d-block font-size-xs text-muted mt-n1" for="color-teal">Teal</label>
                  </div>
                  <div class="custom-control custom-option text-center mb-2 mx-1" style="width: 4rem;">
                    <input class="custom-control-input" type="checkbox" id="color-brown">
                    <label class="custom-option-label rounded-circle" for="color-brown"><span class="custom-option-color rounded-circle" style="background-color: #9a8480;"></span></label>
                    <label class="d-block font-size-xs text-muted mt-n1" for="color-brown">Brown</label>
                  </div>
                  <div class="custom-control custom-option text-center mb-2 mx-1" style="width: 4rem;">
                    <input class="custom-control-input" type="checkbox" id="color-coral-red">
                    <label class="custom-option-label rounded-circle" for="color-coral-red"><span class="custom-option-color rounded-circle" style="background-color: #ff7072;"></span></label>
                    <label class="d-block font-size-xs text-muted mt-n1" for="color-coral-red">Coral red</label>
                  </div>
                  <div class="custom-control custom-option text-center mb-2 mx-1" style="width: 4rem;">
                    <input class="custom-control-input" type="checkbox" id="color-navy">
                    <label class="custom-option-label rounded-circle" for="color-navy"><span class="custom-option-color rounded-circle" style="background-color: #696dc8;"></span></label>
                    <label class="d-block font-size-xs text-muted mt-n1" for="color-navy">Navy</label>
                  </div>
                  <div class="custom-control custom-option text-center mb-2 mx-1" style="width: 4rem;">
                    <input class="custom-control-input" type="checkbox" id="color-charcoal">
                    <label class="custom-option-label rounded-circle" for="color-charcoal"><span class="custom-option-color rounded-circle" style="background-color: #4e4d4d;"></span></label>
                    <label class="d-block font-size-xs text-muted mt-n1" for="color-charcoal">Charcoal</label>
                  </div>
                  <div class="custom-control custom-option text-center mb-2 mx-1" style="width: 4rem;">
                    <input class="custom-control-input" type="checkbox" id="color-sky-blue">
                    <label class="custom-option-label rounded-circle" for="color-sky-blue"><span class="custom-option-color rounded-circle" style="background-color: #8bcdf5;"></span></label>
                    <label class="d-block font-size-xs text-muted mt-n1" for="color-sky-blue">Sky blue</label>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </aside>
        <!-- Content  -->
        <section class="col-lg-8">
          <!-- Toolbar-->
          <div class="d-flex justify-content-center justify-content-sm-between align-items-center pt-lg-2 pb-4 pb-sm-5 mt-n2 mt-lg-0">
            <div class="d-flex flex-wrap">
              <div class="form-inline flex-nowrap mr-3 mr-sm-4 pb-3">
                <label class="text-light opacity-75 text-nowrap mr-2 d-none d-sm-block" for="sorting">Sort by:</label>
                <select class="form-control custom-select" id="sorting">
                  <option>Popularity</option>
                  <option>Low - Hight Price</option>
                  <option>High - Low Price</option>
                  <option>Average Rating</option>
                  <option>A - Z Order</option>
                  <option>Z - A Order</option>
                </select><span class="font-size-sm text-light opacity-75 text-nowrap ml-2 d-none d-md-block">of {{ products.paginator.count }} products</span>
              </div>
            </div>
            {% if products.has_other_pages %}
            <div class="d-flex pb-3">{% if products.has_previous %}<a class="nav-link-style nav-link-light mr-3" href="?page={{ products.previous_page_number }}"><i class="czi-arrow-left"></i></a>{% endif %}<span class="font-size-md text-light">{{ products.number }} / {{ products.paginator.num_pages }}</span>{% if products.has_next %}<a class="nav-link-style nav-link-light ml-3" href="?page={{ products.next_page_number }}"><i class="czi-arrow-right"></i></a>{% endif %}</div>
            {% endif %}
            <div class="d-none d-sm-flex pb-3"><a class="btn btn-icon nav-link-style bg-light text-dark disabled opacity-100 mr-2" href="#"><i class="czi-view-grid"></i></a><a class="btn btn-icon nav-link-style nav-link-light" href="shop-list-ls.html"><i class="czi-view-list"></i></a></div>
          </div>
          {% with category.get_children|filter_qs:"active"|filter_qs:"!hidden" as children %}
          {% if children|length > 0 %}
          <!-- Categories-->
          {% load partition %}
          <div class="jumbotron py-4 d-flex flex-wrap flex-md-nowrap">
            {% for row in children|rows_limited:20 %}
            <ul class="list-style mb-n1">
              {% for child in row %}
              <li><a class="nav-link-style" href="{% url 'category' child.get_path %}">{{ child.name }}</a></li>
              {% endfor %}
            </ul>
            {% endfor %}
          </div>
          {% endif %}
          {% endwith %}
          <!-- Products grid-->
          <div class="row mx-n2">
            {% for product in products %}
            <!-- Product-->
            <div class="col-md-4 col-sm-6 px-2 mb-4">
              {% include "_product_info.html" %}
              <hr class="d-sm-none">
            </div>
            {% endfor %}
          </div>
          {% if products.has_other_pages %}
          <hr class="my-3">
          <!-- Pagination-->
          <nav class="d-flex justify-content-between pt-2" aria-label="Переключение страниц">
            {% if products.has_previous %}
            <ul class="pagination">
              <li class="page-item"><a class="page-link" href="?page={{ products.previous_page_number }}"><i class="czi-arrow-left mr-2"></i>Пред<span class="d-none d-sm-inline d-md-none d-xl-inline">ыдущая</span></a></li>
            </ul>
            {% endif %}
            <ul class="pagination">
              {% for page in products.paginator.page_range %}
              {% if page == products.number %}
              <li class="page-item d-md-none"><span class="page-link page-link-static">{{ products.number }} / {{ products.paginator.num_pages }}</span></li>
              <li class="page-item active d-none d-md-block" aria-current="page"><span class="page-link">{{ products.number }}<span class="sr-only">(текущая)</span></span></li>
              {% elif page >= min_page and page <= max_page or page == 1 or page == products.paginator.num_pages %}
              {% if max_page < products.paginator.num_pages and page == products.paginator.num_pages %}
              <li class="page-item d-none d-md-block">&hellip;</li>
              {% endif %}
              <li class="page-item d-none d-md-block"><a class="page-link" href="?page={{ page }}">{{ page }}</a></li>
              {% if min_page > 1 and page == 1 %}
              <li class="page-item d-none d-md-block">&hellip;</li>
              {% endif %}
              {% endif %}
              {% endfor %}
            </ul>
            {% if products.has_next %}
            <ul class="pagination">
              <li class="page-item"><a class="page-link" href="?page={{ products.next_page_number }}">След<span class="d-none d-sm-inline d-md-none d-xl-inline">ующая</span><i class="czi-arrow-right ml-2"></i></a></li>
            </ul>
            {% endif %}
          </nav>
          {% endif %}
        </section>
      </div>
    </div>
{% endblock content %}
