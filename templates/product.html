{% load static %}
{% load shop_filters %}

<style type="text/css">
    /* overlay at start */
    .mfp-fade.mfp-bg {
    opacity: 0;

    -webkit-transition: all 0.3s ease-out;
    -moz-transition: all 0.3s ease-out;
    transition: all 0.3s ease-out;
    }
    /* overlay animate in */
    .mfp-fade.mfp-bg.mfp-ready {
    opacity: 0.3;
    }
    /* overlay animate out */
    .mfp-fade.mfp-bg.mfp-removing {
    opacity: 0;
    }

    /* content at start */
    .mfp-fade.mfp-wrap .mfp-content .gallery-popup {
    opacity: 0;

    -webkit-transition: all 0.3s ease-out;
    -moz-transition: all 0.3s ease-out;
    transition: all 0.3s ease-out;
    }
    /* content animate it */
    .mfp-fade.mfp-wrap.mfp-ready .mfp-content .gallery-popup {
    opacity: 1;
    }
    /* content animate out */
    .mfp-fade.mfp-wrap.mfp-removing .mfp-content .gallery-popup {
    opacity: 0;
    }

    .gallery-popup .mfp-close { padding: 0; top: 25px; right: 23px; opacity: 1; }
    .gallery-popup * { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; }
    .gallery-popup {
    position: fixed; z-index: 1; top: 40px; left: 40px; bottom: 40px; right: 40px; overflow: hidden; xwidth: 100%; xheight: 100%; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; background: #fff; box-sizing: border-box;
    }
    .gallery-popup-image-container {
    position: absolute; top: 0; left: 100px; bottom: 0; right: 0; overflow: hidden; width: auto; height: 100%; margin: auto; padding: 30px 100px 40px; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; text-align: center;
    }
    .gallery-popup-inner { position: relative; width: 100%; height: 100%; }
    .gallery-popup-image {
    position: absolute; top: 0; right: 0; bottom: 0; left: 0; max-width: 100%; max-height: 100%; margin: auto;
    }
    .gallery-popup-thumbs {
    padding: 0; list-style: none;
    position: absolute; top: 20px; left: 0; right: auto; bottom: 40px; overflow-x: hidden; overflow-y: auto; width: 100px; border-left: none; border-right: 1px solid #e9e9e9; background: #fff;
    }
    .gallery-popup-thumbs-item {
    padding: 0;
    position: relative; width: 72px; height: 72px; margin: 0 auto 12px; border: 2px solid #fff; cursor: pointer; -webkit-transition: border-color .15s ease-out; -moz-transition: border-color .15s ease-out; -o-transition: border-color .15s ease-out; transition: border-color .15s ease-out;
    }
    .gallery-popup-thumbs-item:hover, .gallery-popup-thumbs-item.selected {
    border-color: #10A04E;
    }
    .gallery-popup-thumbs-item img {
    position: absolute; top: 0; right: 0; bottom: 0; left: 0; max-width: 64px; max-height: 64px; margin: auto;
    }
    .gallery-popup-nav {
    position: absolute; bottom: 25px; right: 23px; z-index: 102;
    }
    .gallery-popup-nav-item {
    width: 60px; height: 45px; background-position: 50% 50%; background-repeat: no-repeat; cursor: pointer; text-indent: 61px; overflow: hidden;
    }
    @media screen and (max-width: 768px) {
    .gallery-popup-image-container { left: 70px; padding: 15px 20px 20px; }
    .gallery-popup-thumbs { width: 70px; top: 10px; bottom: 20px; }
    .gallery-popup-thumbs-item { width: 44px; height: 44px; }
    .gallery-popup-thumbs-item img { max-width: 36px; max-height: 36px; }
    .gallery-popup-nav-item { width: 30px; height: 25px; background-size: 50%; }
    }
    .gallery-popup-action-prev {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAPCAYAAAAVk7TYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NEN0I5MDI2RTgxMUU0QkU5N0E5RTBGNzg4MzYzOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NEN0I5MTI2RTgxMUU0QkU5N0E5RTBGNzg4MzYzOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjhDQ0Q3QjhFMjZFODExRTRCRTk3QTlFMEY3ODgzNjM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjhDQ0Q3QjhGMjZFODExRTRCRTk3QTlFMEY3ODgzNjM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+5/TgHQAAAONJREFUeNpi3LhxAwMZgB+IP4IYfn7+RGtiIsMiJyB+CKVJAqRaZs/IyLhGRkbmGIgG8u1oZRnIovU6OrqrjIyMW3V1dVeB+Js2bbSjtmVwixQVFTuAFhxVUFDsAFq4mhQLmYi1COQTqEUPQIIgmlQLmYi1CGQwzCIYINVCJnItQgLoFtqTapkdkRaRZCETFSxCt3AVLguZcFi0mkSLiLKQiYoWEbSQicKgI8lCFiDmAQqsQLLoIQN1ANhCEOPy5csrgOaqMf7//5/tx48fxRwcHMvIsYiIUl8BaH4k0Pw+gAADAKb0mwiMYbceAAAAAElFTkSuQmCC);
    }
    .gallery-popup-action-next {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAPCAYAAAAVk7TYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NkY5Q0RCOTI2RTIxMUU0QkU5N0E5RTBGNzg4MzYzOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2NkY5Q0RCQTI2RTIxMUU0QkU5N0E5RTBGNzg4MzYzOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjY2RjlDREI3MjZFMjExRTRCRTk3QTlFMEY3ODgzNjM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjY2RjlDREI4MjZFMjExRTRCRTk3QTlFMEY3ODgzNjM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+o8rjZQAAAO5JREFUeNq01EEKgzAQBVCTnaB3aNxqegS9gT1CL9F9t4Kn6FYLbTxNd/UQgthVf0AhttUkkg4MkXGYpyJDhLh7iADZeRsizw/anqYRAfo6iusQ+UCm3h8CUCbn4wwpxBfne0EIubkGJSTnJgkX0qEoDIyxknNeuwQVqIqiqERpoOONdrdjhStQhfAiBUqtrFOlwQk4QZgzg2aYC1CF5BwV+sIWwMwF9BPbAqI/1UGL2AdYrYGm0CpmCE5QrYO0mAa0goywBfBk+umsMRWM40T+NGecVxtIBhm3vs2WZ33fH33fv+ABniZbf4q3AAMAgV2eMZtbl18AAAAASUVORK5CYII=);
    }
    .mfp-close {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0NDE4REM2OTI2REYxMUU0QkU5N0E5RTBGNzg4MzYzOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0NDE4REM2QTI2REYxMUU0QkU5N0E5RTBGNzg4MzYzOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjQ0MThEQzY3MjZERjExRTRCRTk3QTlFMEY3ODgzNjM4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjQ0MThEQzY4MjZERjExRTRCRTk3QTlFMEY3ODgzNjM4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+0Nc5IQAAAWpJREFUeNq01j1OwzAUAODkCaEM7QmiQJKBKUYqMwo3KDPnQByArWoljoGidIB0ZQYOkIUxLDlBh5QlvCeMZCA/z66xZDl+sd+nxIlltygeHSwTrFvHoMznl6NjNptiguO2gNdTrG9YU+cfCkIXlB/bKaD4IcRp4brug22QIMqbJKIgBzCwi6JoJYRY2wQVKI/jeIWhHcgbVRhGC1ugCuGDLDBUURyUAVbAPugHZgMcgv5g+4DfEM7rhDoxE1CFaF4X1IvpgFxoEGOCbGgUGwG1IBbWA97oQmxMBX3ff8XuEtsXHUgLk+BRXdfnQRA8UYv9Y535Olj69cMm2Wx2dkst9eWubhVL5Rqt6dUh8CzXMNcBwQCqfn00bBBMoI6vlAWCKaQUNgh7QlogWIDYIFiCWCB0QLkhNAqCZWgQPKADKgYyBXq3dJKr5N7plGWZYd4Tt23bw6Zprj3PuzeBGCfiEPNfYf67TwEGADMrMRAGyAgwAAAAAElFTkSuQmCC);
    }
</style>

<div class="gallery-popup">
    <div class="gallery-popup-image-container">
        <div class="gallery-popup-inner">
{% if product.image_prefix|add:'.b.jpg'|file_exists %}
<img class="gallery-popup-image" src="{{ MEDIA_URL }}{{ product.image_prefix }}.b.jpg" alt="{{ product.title }} {{ product.whatis }}" style="display: none" onload="$(this).fadeIn('fast')"/>
{% elif product.image_prefix|add:'.jpg'|file_exists %}
<img class="gallery-popup-image" src="{{ MEDIA_URL }}{{ product.image_prefix }}.jpg" alt="{{ product.title }} {{ product.whatis }}" style="display: none" onload="$(this).fadeIn('fast')"/>
{% endif %}
        </div>
    </div>


{% if product.images %}
<ul class="gallery-popup-thumbs">
    <li class="gallery-popup-thumbs-item selected" data-image="{% if product.image_prefix|add:'.b.jpg'|file_exists %}
        {{ MEDIA_URL }}{{ product.image_prefix }}.b.jpg
        {% elif product.image_prefix|add:'.jpg'|file_exists %}
        {{ MEDIA_URL }}{{ product.image_prefix }}.jpg{% endif %}">
        <img src="{{ MEDIA_URL }}{{ product.image_prefix }}.s.jpg" alt="{{ product.title }} {{ product.whatis }}" />
    </li>
    {% for image in product.images %}
    <li class="gallery-popup-thumbs-item" data-image="{{ MEDIA_URL }}{{ product.image_prefix }}/{{image}}.jpg">
        <img src="{{ MEDIA_URL }}{{ product.image_prefix }}/{{image}}.s.jpg" alt="{{ product.title }} - Фото №{{ forloop.counter }}" />
    </li>
    {% endfor %}
</ul>

<div class="gallery-popup-nav">
    <div class="gallery-popup-nav-item gallery-popup-action-prev"></div>
    <div class="gallery-popup-nav-item gallery-popup-action-next"></div>
</div>
{% endif %}
</div>
