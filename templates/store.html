{% extends "page.html" %}
{% load staticfiles %}
{% load l10n %}
{% load django_bootstrap_breadcrumbs %}
{% load shop_filters %}
{% block title %}Швейные машины {{ store.city.name }}{% endblock %}
{% block breadcrumbs %}
    {{ block.super }}
    {% breadcrumb 'Адреса магазинов' 'stores' %}
    {% breadcrumb store.city.name '' %}
{% endblock %}
{% block content_title %}{{ store.name }} - {{ store.city.name }}{% endblock %}
{% block content %}
    <section class="container py-3 py-lg-5">
      <p class="lead">Продажа швейных машин, оверлоков, вязальных машин и аксессуаров для рукоделия в г. {{ store.city.name }}</p>
    </section>
    <!-- Contact detail cards-->
    <section class="container-fluid">
      <div class="row">
        <div class="col-xl-{% if store.url %}3{% else %}4{% endif %} col-md-6 mb-grid-gutter"><a class="card" href="#map" data-scroll>
            <div class="card-body text-center"><i class="czi-location h3 mt-2 mb-4 text-primary"></i>
              <h3 class="h6 mb-3">Адрес</h3>
              <ul class="list-unstyled font-size-sm text-muted mb-0">
                <li>{{ store.address }}</li>
                {% if store.address2 %}
                <li>{{ store.address2 }}</li>
                {% endif %}
              </ul>
              {% if store.latitude and store.longitude %}
              <div class="font-size-sm text-primary">Посмотреть на карте<i class="czi-arrow-right align-middle ml-1"></i></div>
              {% endif %}
            </div></a></div>
        {% if store.hours %}
        <div class="col-xl-{% if store.url %}3{% else %}4{% endif %} col-md-6 mb-grid-gutter">
          <div class="card">
            <div class="card-body text-center"><i class="czi-time h3 mt-2 mb-4 text-primary"></i>
              <h3 class="h6 mb-3">Часы работы</h3>
              <ul class="list-unstyled font-size-sm text-muted mb-0">
                {% for hours in store.hours_as_list %}
                <li{% if forloop.last %} class="mb-0"{% endif %}>{{ hours }}</li>
                {% endfor %}
              </ul>
            </div>
          </div>
        </div>
        {% endif %}
        <div class="col-xl-{% if store.url %}3{% else %}4{% endif %} col-md-6 mb-grid-gutter">
          <div class="card">
            <div class="card-body text-center"><i class="czi-phone h3 mt-2 mb-4 text-primary"></i>
              <h3 class="h6 mb-3">Телефон{% if store.phone2 %}ы{% endif %}</h3>
              <ul class="list-unstyled font-size-sm mb-0">
                {% for phone in store.phones_as_list %}
                <li{% if forloop.last %} class="mb-0"{% endif %}><a class="nav-link-style" href="tel:{{ phone }}">{{ phone }}</a></li>
                {% endfor %}
              </ul>
            </div>
          </div>
        </div>
        {% if store.url %}
        <div class="col-xl-{% if store.url %}3{% else %}4{% endif %} col-md-6 mb-grid-gutter">
          <div class="card">
            <div class="card-body text-center"><i class="czi-dribbble h3 mt-2 mb-4 text-primary"></i>
              <h3 class="h6 mb-3">Сайт магазина</h3>
              <ul class="list-unstyled font-size-sm mb-0">
                <li class="mb-0"><a class="nav-link-style" href="{{ store.url }}">s{{ store.url }}</a></li>
              </ul>
            </div>
          </div>
        </div>
        {% endif %}
      </div>
    </section>
    {% if store.description %}
    <section class="container py-3 py-lg-5 mt-4 mb-3">
      <p>{{ store.description|safe }}</p>
    </section>
    {% endif %}
    {% if store.latitude and store.longitude %}
    <!-- Map -->
    <div class="container-fluid px-0 pt-3 pt-lg-5" id="map">
      <div class="row no-gutters">
        <div class="col-lg-12 iframe-full-height-wrap" style="min-height: 28rem">
          <div class="iframe-full-height" id="map-container"></div>
        </div>
      </div>
    </div>
    {% endif %}
{% endblock %}
{% block javascript %}
{% if store.latitude and store.longitude %}
<script type="text/javascript">
(function() {
    'use strict';
    document.addEventListener("DOMContentLoaded", function() {
        ymaps.ready(function() {
            var coords = [{{ store.latitude|unlocalize }}, {{ store.longitude|unlocalize }}];
            var myMap = new ymaps.Map('map-container', {center: coords, zoom: 14, controls: ['zoomControl', 'typeSelector',  'fullscreenControl', 'geolocationControl']});
            var myPlacemark = new ymaps.Placemark(coords, {}, {preset: 'islands#blueStarCircleIcon'});
            myMap.geoObjects.add(myPlacemark);
        });
    }, false);
})();
</script>
<script src="https://api-maps.yandex.ru/2.1/?apikey=d55e0ba4-d72b-4062-914c-94559697de16&lang=ru_RU"></script>
{% endif %}
{% endblock %}
